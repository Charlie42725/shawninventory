# AI 財務洞察設定指南

## 🤖 功能說明

系統已整合 **Google Gemini AI**,可以自動分析您的財務數據並提供專業建議。

## ✅ 已完成的設定

- ✅ Gemini API Key 已內建到系統中
- ✅ API Key: `AIzaSyAwX3koqLXUlhGrZLtXumHCbYn1cz572ZU`
- ✅ 使用模型: `gemini-1.5-flash` (快速且免費)
- ✅ 無需額外配置,開箱即用

## 🚀 如何使用

1. 前往 **AI 財務洞察** 頁面
   - URL: `http://localhost:3000/insights`
   - 或點擊導航欄的 "🤖 AI 財務洞察"

2. 選擇分析期間
   - 預設區間: 最近一週/月/季/年
   - 自定義區間: 自行選擇開始和結束日期

3. 點擊 "🤖 開始 AI 分析" 按鈕

4. 等待 5-10 秒,AI 會生成:
   - 📊 整體財務狀況分析
   - ✅ 具體行動建議 (3-5項)
   - ⚠️ 潛在風險警示 (2-4項)
   - 🚀 成長機會建議 (2-4項)

## 📊 AI 分析內容

Gemini AI 會分析以下數據:

### 收入分析
- 總營收
- 交易筆數
- 平均客單價
- 按類別銷售統計

### 成本分析
- 銷售成本 (COGS)
- 銷售成本佔比
- 營運費用
- 營運費用佔比
- 進貨總額

### 獲利能力
- 毛利與毛利率
- 淨利與淨利率

### 產品表現
- 熱銷產品 Top 5
- 各產品營收佔比

### 庫存狀況
- 總產品數
- 庫存總價值
- 低庫存產品警告

## 💰 使用成本

- **免費額度**: Gemini API 有慷慨的免費額度
- **每次分析**: 約 1500-2500 tokens
- **預估成本**: 免費額度內無需付費

## 🔧 進階設定 (可選)

如果您想使用自己的 Gemini API Key:

1. 前往 [Google AI Studio](https://makersuite.google.com/app/apikey)
2. 創建新的 API Key
3. 在 `.env.local` 中設定:
   ```env
   GEMINI_API_KEY=your_new_api_key
   ```
4. 重新啟動開發伺服器

## 🎯 使用技巧

1. **定期分析**: 建議每週或每月進行一次 AI 分析
2. **對比分析**: 可以分析不同時期的數據進行對比
3. **實施建議**: AI 提供的建議都是可執行的,建議記錄並追蹤實施效果
4. **風險管理**: 特別注意 AI 標示的風險警示

## 📝 注意事項

- 首次分析可能需要較長時間 (10-15秒)
- 確保有足夠的財務數據 (建議至少有一週的銷售記錄)
- AI 分析基於數據,數據越完整分析越準確
- 建議在每月底進行完整的財務分析

## 🔒 安全性

- API Key 儲存在伺服器端,不會暴露給瀏覽器
- 財務數據僅用於即時分析,不會儲存在 Google 伺服器
- 所有通訊使用 HTTPS 加密

## 🆘 常見問題

**Q: AI 分析需要多久?**
A: 通常 5-10 秒,取決於數據量和網路速度。

**Q: 如果分析失敗怎麼辦?**
A: 檢查網路連線,或稍後再試。如果持續失敗,請檢查 API Key 是否有效。

**Q: AI 分析準確嗎?**
A: Gemini AI 是專業的語言模型,分析基於您的實際數據,準確度很高。但建議作為參考,結合實際業務情況判斷。

**Q: 可以導出 AI 分析報告嗎?**
A: 目前頁面支援複製內容,未來會加入 PDF/Excel 導出功能。

## 📞 技術支援

如有任何問題,請參考:
- 系統文檔: `CLAUDE.md`
- API 文檔: `src/app/api/insights/analyze/route.ts`
